<!DOCTYPE html>
<html lang="en-US">
<head>
    <title>AntennaApp</title>
    <link rel="stylesheet" href="/css/site.css">
</head>
<body>
<nav>
<ul>
    <li><a href="/">Home</a></li>
    <li><a href="index.html">README</a></li>
    <li><a href="LICENSE">LICENSE</a></li>
    <li><a href="INSTALL.html">INSTALL</a></li>
    <li><a href="user_manual.html">User Manual</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="search.html">Search</a></li>
    <li><a href="https://github.com/rsdoiel/AntennaApp">GitHub</a></li>
</ul>
</nav>
<section>
<h1 id="development-notes">Development Notes</h1>
<h2 id="text-casting">Text Casting</h2>
<ul>
<li>Textcasting website, <a href="https://textcasting.org"
class="uri">https://textcasting.org</a></li>
<li>Uses “source” namespace in RSS, see <a
href="https://source.scripting.com"
class="uri">https://source.scripting.com</a>
<ul>
<li>also see <a href="https://scripting.com/?tab=links/rss.xml"
class="uri">https://scripting.com/?tab=links/rss.xml</a></li>
<li>and <a
href="http://scripting.com/2022/07/19/152235.html?title=devNotesForMarkdownInFeeds"
class="uri">http://scripting.com/2022/07/19/152235.html?title=devNotesForMarkdownInFeeds</a></li>
<li>and <a
href="http://xmlviewer.scripting.com/?url=https://wordland.social/scripting/237777565/rss.xml"
class="uri">http://xmlviewer.scripting.com/?url=https://wordland.social/scripting/237777565/rss.xml</a></li>
</ul></li>
<li>GitHub issue
<ul>
<li><a
href="https://github.com/scripting/sourceNamespaceComments/issues/3"
class="uri">https://github.com/scripting/sourceNamespaceComments/issues/3</a></li>
<li>I need to ask the question to understand how I approach it.</li>
</ul></li>
</ul>
<h2 id="upgrading-schema">Upgrading schema</h2>
<p>I’ve alter my SQLite schema several times. I need to implement an
orderly upgrade process. I’m thinking the command should be something
like <code>antenna upgrade</code> to update the schema in all the feed
collections.</p>
<p>Since upgrades will accumulate I think they should go in a
sql_upgrade.go instead of sql_stmts.go</p>
<p>Here’s an outline of what is needed at the SQL level.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Check if the column exists</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Check if the column exists</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> cnt</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> pragma_table_info(<span class="st">&#39;items&#39;</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> name <span class="op">=</span> <span class="st">&#39;sourceMarkdown&#39;</span>;</span></code></pre></div>
<p>If this returns zero rows then I would execute the</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- add column to table</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> items <span class="kw">ADD</span> <span class="kw">COLUMN</span> sourceMarkdown TEXT;</span></code></pre></div>
<p>The ugprade process should support adding the postPath and
sourceMarkdown columns in the iterms table.</p>
<h2 id="namespace-in-rss">Namespace in RSS</h2>
<p>Sicne I am using RSS 2.0 as the guide to how I’m implementing the
items schema I need to think more about how I want to integrate
namespace more generally. I’m beinging to think the source namespace
should be a map[string]interface{} like the dcExt. This would let me
grow the support without changing the SQL schema as I add fields.</p>
<p>In this approach only the core fields would be columns and each
complex relations would remain as they are as either an object or
list.</p>
</section>
</body>
</html>